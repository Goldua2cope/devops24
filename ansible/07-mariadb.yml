---
- name: MariaDB-server
  hosts: db
  become: true
  vars_files:
    - mariadbpw.yml
  tasks:
    # - name: Ensure MariaDB-server is installed
    #   ansible.builtin.package:
    #     name: 
    #       - mariadb-server
    #       - python3-PyMySQL
    #     state: latest
    #   register: result

    # - name: Start mariadb at boot
    #   ansible.builtin.service:
    #     name: mariadb
    #     state: started
    #     enabled: true
    
    # - name: Populate service facts
    #   ansible.builtin.service_facts:

    # - name: Print service facts
    #   ansible.builtin.debug:
    #     var: ansible_facts.services['mariadb.service']['state']

    - name: Set root root password
      # when: result is succeeded
      ansible.builtin.mysql_user:
        check_implicit_admin: yes
        login_user: root
        login_password: "{{ mysql_root_password }}"
        name: root
        password: "{{ mysql_root_password }}"